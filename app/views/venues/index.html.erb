
<!-- http://www.caever.com.au/ -->

<div class="container-fluid">
  <div class="row">
    <div class="col-xs-12 col-md-8 ">
      <div class="fixed-cards">
        <div class="row">

          <% @venues.each do |venue| %>
          <div class="col-xs-12 col-md-6">
            <div class="stream-entry-inner" >
              <%=  link_to venue_path(venue) do %>
              <div class="stream-image" style="background-image: url(<%= cl_image_path venue.photo.path %>)">
                <div class="card_description">
                  <h4><%= venue.name %></h4>
                </div>

              </div>

              <% end %>
              <div class="border-bc">
                <div class="stream-body">
                  <div class="stream-body-description">
                    <p><%= truncate(venue.description, length: 100, separator: ' ') %></p>
                  </div>
                  <div class="stream-body-bars">
                    <div class="img_progress">
                      <%= image_tag 'chili.svg', class:"img_format" %>
                      <div class="progress">
                        <div class="progress-bar progress-bar-success" role="progressbar" style="width: 90%" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">
                        </div>
                      </div>
                    </div>
                    <div class="img_progress">
                      <%= image_tag 'sofa.svg', class:"img_format" %>
                      <div class="progress">
                        <div class="progress-bar progress-bar-danger" role="progressbar" style="width: 55%" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">
                        </div>
                      </div>
                    </div>
                    <div class="img_progress">
                      <%= image_tag 'noise.svg', class:"img_format" %>
                      <div class="progress">
                        <div class="progress-bar progress-bar-warning" role="progressbar" style="width: 75%" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="stream-body2">
                  <a href="#"><i class="fa fa-instagram"></i></a>
                  <span><%= venue.area %> <%= venue.price %></span>
                  <a id="heart" href="#"><i class="fa fa-heart-o"></i></a>
                </div>
              </div>
            </div>
          </div>
          <% end %>
        </div>
      </div>
    </div>
    <div class="col-xs-12 col-md-4">
      <div id="map" style="width: 100%; height: 100vh;">
      </div>
    </div>
  </div>
</div>

<% content_for(:after_js) do %>
<script>
  $(document).ready(function() {
    var handler = Gmaps.build('Google');
    handler.buildMap({ internal: { id: 'map' } }, function() {
      markers = handler.addMarkers(<%= raw @hash.to_json %>);
      handler.bounds.extendWith(markers);
      handler.fitMapToBounds();
      if (markers.length == 0) {
        handler.getMap().setZoom(2);
      } else if (markers.length == 1) {
        handler.getMap().setZoom(14);
      }
    });
  });
</script>
<% end %>

